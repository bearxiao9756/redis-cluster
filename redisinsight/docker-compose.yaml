services:
  # 1. Redis 数据库服务
  redis:
    image: redis:7-alpine  # 推荐使用轻量级的基础 Redis 镜像
    container_name: my-redis
    restart: always
    ports:
      - "9379:6379"
    command: redis-server --requirepass your_strong_password  # 设置密码，请替换为您自己的强密码
    environment:
      # 在 RedisInsight 服务中，可以使用 'redis' 作为主机名
      REDIS_PASSWORD: af45d4daS*
    volumes:
      - redis-data:/data  # 数据持久化卷

  # 2. RedisInsight 可视化工具服务
  redisinsight:
    image: redis/redisinsight:latest  # 官方推荐的镜像
    container_name: redisinsight
    restart: always
    ports:
      - "8001:8001"  # 将容器的 8001 端口映射到宿主机的 8001 端口
    volumes:
      - redisinsight-data:/data  # RedisInsight 本身的数据和连接配置持久化
    # 确保 RedisInsight 与 Redis 在同一个 Docker 网络中
    depends_on:
      - redis

volumes:
  redis-data:
    driver: local
  redisinsight-data:
    driver: local